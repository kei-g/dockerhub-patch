"use strict";var Gt=Object.create;var Be=Object.defineProperty;var Kt=Object.getOwnPropertyDescriptor;var Jt=Object.getOwnPropertyNames;var zt=Object.getPrototypeOf,Qt=Object.prototype.hasOwnProperty;var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Yt=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Jt(e))!Qt.call(t,i)&&i!==r&&Be(t,i,{get:()=>e[i],enumerable:!(n=Kt(e,i))||n.enumerable});return t};var Fe=(t,e,r)=>(r=t!=null?Gt(zt(t)):{},Yt(e||!t||!t.__esModule?Be(r,"default",{value:t,enumerable:!0}):r,t));var re=w(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.toCommandProperties=V.toCommandValue=void 0;function nr(t){return t==null?"":typeof t=="string"||t instanceof String?t:JSON.stringify(t)}V.toCommandValue=nr;function ir(t){return Object.keys(t).length?{title:t.title,file:t.file,line:t.startLine,endLine:t.endLine,col:t.startColumn,endColumn:t.endColumn}:{}}V.toCommandProperties=ir});var Xe=w(R=>{"use strict";var or=R&&R.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sr=R&&R.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ar=R&&R.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&or(e,t,r);return sr(e,t),e};Object.defineProperty(R,"__esModule",{value:!0});R.issue=R.issueCommand=void 0;var ur=ar(require("os")),Qe=re();function Ye(t,e,r){let n=new me(t,e,r);process.stdout.write(n.toString()+ur.EOL)}R.issueCommand=Ye;function cr(t,e=""){Ye(t,{},e)}R.issue=cr;var ze="::",me=class{constructor(e,r,n){e||(e="missing.command"),this.command=e,this.properties=r,this.message=n}toString(){let e=ze+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(r?r=!1:e+=",",e+=`${n}=${dr(i)}`)}}return e+=`${ze}${lr(this.message)}`,e}};function lr(t){return(0,Qe.toCommandValue)(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function dr(t){return(0,Qe.toCommandValue)(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var tt=w(A=>{"use strict";var fr=A&&A.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),hr=A&&A.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_e=A&&A.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&fr(e,t,r);return hr(e,t),e};Object.defineProperty(A,"__esModule",{value:!0});A.prepareKeyValueMessage=A.issueFileCommand=void 0;var pr=_e(require("crypto")),Ze=_e(require("fs")),ve=_e(require("os")),et=re();function mr(t,e){let r=process.env[`GITHUB_${t}`];if(!r)throw new Error(`Unable to find environment variable for file command ${t}`);if(!Ze.existsSync(r))throw new Error(`Missing file at path: ${r}`);Ze.appendFileSync(r,`${(0,et.toCommandValue)(e)}${ve.EOL}`,{encoding:"utf8"})}A.issueFileCommand=mr;function vr(t,e){let r=`ghadelimiter_${pr.randomUUID()}`,n=(0,et.toCommandValue)(e);if(t.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${t}<<${r}${ve.EOL}${n}${ve.EOL}${r}`}A.prepareKeyValueMessage=vr});var nt=w(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.checkBypass=W.getProxyUrl=void 0;function _r(t){let e=t.protocol==="https:";if(rt(t))return;let r=e?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY;if(r)return new URL(r)}W.getProxyUrl=_r;function rt(t){if(!t.hostname)return!1;let e=process.env.no_proxy||process.env.NO_PROXY||"";if(!e)return!1;let r;t.port?r=Number(t.port):t.protocol==="http:"?r=80:t.protocol==="https:"&&(r=443);let n=[t.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let i of e.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o))if(n.some(o=>o===i))return!0;return!1}W.checkBypass=rt});var at=w(H=>{"use strict";var Pi=require("net"),yr=require("tls"),ye=require("http"),it=require("https"),gr=require("events"),Ti=require("assert"),wr=require("util");H.httpOverHttp=br;H.httpsOverHttp=Or;H.httpOverHttps=Er;H.httpsOverHttps=Sr;function br(t){var e=new k(t);return e.request=ye.request,e}function Or(t){var e=new k(t);return e.request=ye.request,e.createSocket=ot,e.defaultPort=443,e}function Er(t){var e=new k(t);return e.request=it.request,e}function Sr(t){var e=new k(t);return e.request=it.request,e.createSocket=ot,e.defaultPort=443,e}function k(t){var e=this;e.options=t||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||ye.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(n,i,o,s){for(var c=st(i,o,s),f=0,a=e.requests.length;f<a;++f){var u=e.requests[f];if(u.host===c.host&&u.port===c.port){e.requests.splice(f,1),u.request.onSocket(n);return}}n.destroy(),e.removeSocket(n)})}wr.inherits(k,gr.EventEmitter);k.prototype.addRequest=function(e,r,n,i){var o=this,s=ge({request:e},o.options,st(r,n,i));if(o.sockets.length>=this.maxSockets){o.requests.push(s);return}o.createSocket(s,function(c){c.on("free",f),c.on("close",a),c.on("agentRemove",a),e.onSocket(c);function f(){o.emit("free",c,s)}function a(u){o.removeSocket(c),c.removeListener("free",f),c.removeListener("close",a),c.removeListener("agentRemove",a)}})};k.prototype.createSocket=function(e,r){var n=this,i={};n.sockets.push(i);var o=ge({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(o.localAddress=e.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),$("making CONNECT request");var s=n.request(o);s.useChunkedEncodingByDefault=!1,s.once("response",c),s.once("upgrade",f),s.once("connect",a),s.once("error",u),s.end();function c(l){l.upgrade=!0}function f(l,_,U){process.nextTick(function(){a(l,_,U)})}function a(l,_,U){if(s.removeAllListeners(),_.removeAllListeners(),l.statusCode!==200){$("tunneling socket could not be established, statusCode=%d",l.statusCode),_.destroy();var L=new Error("tunneling socket could not be established, statusCode="+l.statusCode);L.code="ECONNRESET",e.request.emit("error",L),n.removeSocket(i);return}if(U.length>0){$("got illegal response body from proxy"),_.destroy();var L=new Error("got illegal response body from proxy");L.code="ECONNRESET",e.request.emit("error",L),n.removeSocket(i);return}return $("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=_,r(_)}function u(l){s.removeAllListeners(),$(`tunneling socket could not be established, cause=%s
`,l.message,l.stack);var _=new Error("tunneling socket could not be established, cause="+l.message);_.code="ECONNRESET",e.request.emit("error",_),n.removeSocket(i)}};k.prototype.removeSocket=function(e){var r=this.sockets.indexOf(e);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function ot(t,e){var r=this;k.prototype.createSocket.call(r,t,function(n){var i=t.request.getHeader("host"),o=ge({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):t.host}),s=yr.connect(0,o);r.sockets[r.sockets.indexOf(n)]=s,e(s)})}function st(t,e,r){return typeof t=="string"?{host:t,port:e,localAddress:r}:t}function ge(t){for(var e=1,r=arguments.length;e<r;++e){var n=arguments[e];if(typeof n=="object")for(var i=Object.keys(n),o=0,s=i.length;o<s;++o){var c=i[o];n[c]!==void 0&&(t[c]=n[c])}}return t}var $;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?$=function(){var t=Array.prototype.slice.call(arguments);typeof t[0]=="string"?t[0]="TUNNEL: "+t[0]:t.unshift("TUNNEL:"),console.error.apply(console,t)}:$=function(){};H.debug=$});var ct=w((Ai,ut)=>{ut.exports=at()});var dt=w(v=>{"use strict";var Pr=v&&v.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Tr=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ue=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Pr(e,t,r);return Tr(e,t),e},g=v&&v.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.HttpClient=v.isHttps=v.HttpClientResponse=v.HttpClientError=v.getProxyUrl=v.MediaTypes=v.Headers=v.HttpCodes=void 0;var ne=ue(require("http")),we=ue(require("https")),lt=ue(nt()),ie=ue(ct()),M;(function(t){t[t.OK=200]="OK",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.ResourceMoved=302]="ResourceMoved",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.SwitchProxy=306]="SwitchProxy",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.TooManyRequests=429]="TooManyRequests",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout"})(M=v.HttpCodes||(v.HttpCodes={}));var b;(function(t){t.Accept="accept",t.ContentType="content-type"})(b=v.Headers||(v.Headers={}));var N;(function(t){t.ApplicationJson="application/json"})(N=v.MediaTypes||(v.MediaTypes={}));function Rr(t){let e=lt.getProxyUrl(new URL(t));return e?e.href:""}v.getProxyUrl=Rr;var Ar=[M.MovedPermanently,M.ResourceMoved,M.SeeOther,M.TemporaryRedirect,M.PermanentRedirect],Cr=[M.BadGateway,M.ServiceUnavailable,M.GatewayTimeout],xr=["OPTIONS","GET","DELETE","HEAD"],Dr=10,Mr=5,se=class t extends Error{constructor(e,r){super(e),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,t.prototype)}};v.HttpClientError=se;var ae=class{constructor(e){this.message=e}readBody(){return g(this,void 0,void 0,function*(){return new Promise(e=>g(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{e(r.toString())})}))})}};v.HttpClientResponse=ae;function qr(t){return new URL(t).protocol==="https:"}v.isHttps=qr;var be=class{constructor(e,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(e,r){return g(this,void 0,void 0,function*(){return this.request("OPTIONS",e,null,r||{})})}get(e,r){return g(this,void 0,void 0,function*(){return this.request("GET",e,null,r||{})})}del(e,r){return g(this,void 0,void 0,function*(){return this.request("DELETE",e,null,r||{})})}post(e,r,n){return g(this,void 0,void 0,function*(){return this.request("POST",e,r,n||{})})}patch(e,r,n){return g(this,void 0,void 0,function*(){return this.request("PATCH",e,r,n||{})})}put(e,r,n){return g(this,void 0,void 0,function*(){return this.request("PUT",e,r,n||{})})}head(e,r){return g(this,void 0,void 0,function*(){return this.request("HEAD",e,null,r||{})})}sendStream(e,r,n,i){return g(this,void 0,void 0,function*(){return this.request(e,r,n,i)})}getJson(e,r={}){return g(this,void 0,void 0,function*(){r[b.Accept]=this._getExistingOrDefaultHeader(r,b.Accept,N.ApplicationJson);let n=yield this.get(e,r);return this._processResponse(n,this.requestOptions)})}postJson(e,r,n={}){return g(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[b.Accept]=this._getExistingOrDefaultHeader(n,b.Accept,N.ApplicationJson),n[b.ContentType]=this._getExistingOrDefaultHeader(n,b.ContentType,N.ApplicationJson);let o=yield this.post(e,i,n);return this._processResponse(o,this.requestOptions)})}putJson(e,r,n={}){return g(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[b.Accept]=this._getExistingOrDefaultHeader(n,b.Accept,N.ApplicationJson),n[b.ContentType]=this._getExistingOrDefaultHeader(n,b.ContentType,N.ApplicationJson);let o=yield this.put(e,i,n);return this._processResponse(o,this.requestOptions)})}patchJson(e,r,n={}){return g(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[b.Accept]=this._getExistingOrDefaultHeader(n,b.Accept,N.ApplicationJson),n[b.ContentType]=this._getExistingOrDefaultHeader(n,b.ContentType,N.ApplicationJson);let o=yield this.patch(e,i,n);return this._processResponse(o,this.requestOptions)})}request(e,r,n,i){return g(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(r),s=this._prepareRequest(e,o,i),c=this._allowRetries&&xr.includes(e)?this._maxRetries+1:1,f=0,a;do{if(a=yield this.requestRaw(s,n),a&&a.message&&a.message.statusCode===M.Unauthorized){let l;for(let _ of this.handlers)if(_.canHandleAuthentication(a)){l=_;break}return l?l.handleAuthentication(this,s,n):a}let u=this._maxRedirects;for(;a.message.statusCode&&Ar.includes(a.message.statusCode)&&this._allowRedirects&&u>0;){let l=a.message.headers.location;if(!l)break;let _=new URL(l);if(o.protocol==="https:"&&o.protocol!==_.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield a.readBody(),_.hostname!==o.hostname)for(let U in i)U.toLowerCase()==="authorization"&&delete i[U];s=this._prepareRequest(e,_,i),a=yield this.requestRaw(s,n),u--}if(!a.message.statusCode||!Cr.includes(a.message.statusCode))return a;f+=1,f<c&&(yield a.readBody(),yield this._performExponentialBackoff(f))}while(f<c);return a})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,r){return g(this,void 0,void 0,function*(){return new Promise((n,i)=>{function o(s,c){s?i(s):c?n(c):i(new Error("Unknown error"))}this.requestRawWithCallback(e,r,o)})})}requestRawWithCallback(e,r,n){typeof r=="string"&&(e.options.headers||(e.options.headers={}),e.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1;function o(f,a){i||(i=!0,n(f,a))}let s=e.httpModule.request(e.options,f=>{let a=new ae(f);o(void 0,a)}),c;s.on("socket",f=>{c=f}),s.setTimeout(this._socketTimeout||3*6e4,()=>{c&&c.end(),o(new Error(`Request timeout: ${e.options.path}`))}),s.on("error",function(f){o(f)}),r&&typeof r=="string"&&s.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){s.end()}),r.pipe(s)):s.end()}getAgent(e){let r=new URL(e);return this._getAgent(r)}_prepareRequest(e,r,n){let i={};i.parsedUrl=r;let o=i.parsedUrl.protocol==="https:";i.httpModule=o?we:ne;let s=o?443:80;if(i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):s,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=e,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers)for(let c of this.handlers)c.prepareRequest(i.options);return i}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},oe(this.requestOptions.headers),oe(e||{})):oe(e||{})}_getExistingOrDefaultHeader(e,r,n){let i;return this.requestOptions&&this.requestOptions.headers&&(i=oe(this.requestOptions.headers)[r]),e[r]||i||n}_getAgent(e){let r,n=lt.getProxyUrl(e),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let o=e.protocol==="https:",s=100;if(this.requestOptions&&(s=this.requestOptions.maxSockets||ne.globalAgent.maxSockets),n&&n.hostname){let c={maxSockets:s,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},f,a=n.protocol==="https:";o?f=a?ie.httpsOverHttps:ie.httpsOverHttp:f=a?ie.httpOverHttps:ie.httpOverHttp,r=f(c),this._proxyAgent=r}if(this._keepAlive&&!r){let c={keepAlive:this._keepAlive,maxSockets:s};r=o?new we.Agent(c):new ne.Agent(c),this._agent=r}return r||(r=o?we.globalAgent:ne.globalAgent),o&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(e){return g(this,void 0,void 0,function*(){e=Math.min(Dr,e);let r=Mr*Math.pow(2,e);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(e,r){return g(this,void 0,void 0,function*(){return new Promise((n,i)=>g(this,void 0,void 0,function*(){let o=e.message.statusCode||0,s={statusCode:o,result:null,headers:{}};o===M.NotFound&&n(s);function c(u,l){if(typeof l=="string"){let _=new Date(l);if(!isNaN(_.valueOf()))return _}return l}let f,a;try{a=yield e.readBody(),a&&a.length>0&&(r&&r.deserializeDates?f=JSON.parse(a,c):f=JSON.parse(a),s.result=f),s.headers=e.message.headers}catch{}if(o>299){let u;f&&f.message?u=f.message:a&&a.length>0?u=a:u=`Failed request: (${o})`;let l=new se(u,o);l.result=s.result,i(l)}else n(s)}))})}};v.HttpClient=be;var oe=t=>Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{})});var ft=w(q=>{"use strict";var Pe=q&&q.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(q,"__esModule",{value:!0});q.PersonalAccessTokenCredentialHandler=q.BearerCredentialHandler=q.BasicCredentialHandler=void 0;var Oe=class{constructor(e,r){this.username=e,this.password=r}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Pe(this,void 0,void 0,function*(){throw new Error("not implemented")})}};q.BasicCredentialHandler=Oe;var Ee=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Pe(this,void 0,void 0,function*(){throw new Error("not implemented")})}};q.BearerCredentialHandler=Ee;var Se=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Pe(this,void 0,void 0,function*(){throw new Error("not implemented")})}};q.PersonalAccessTokenCredentialHandler=Se});var mt=w(G=>{"use strict";var ht=G&&G.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(G,"__esModule",{value:!0});G.OidcClient=void 0;var jr=dt(),kr=ft(),pt=Re(),Te=class t{static createHttpClient(e=!0,r=10){let n={allowRetries:e,maxRetries:r};return new jr.HttpClient("actions/oidc-client",[new kr.BearerCredentialHandler(t.getRequestToken())],n)}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var r;return ht(this,void 0,void 0,function*(){let o=(r=(yield t.createHttpClient().getJson(e).catch(s=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${s.statusCode}
 
        Error Message: ${s.message}`)})).result)===null||r===void 0?void 0:r.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(e){return ht(this,void 0,void 0,function*(){try{let r=t.getIDTokenUrl();if(e){let i=encodeURIComponent(e);r=`${r}&audience=${i}`}(0,pt.debug)(`ID token url is ${r}`);let n=yield t.getCall(r);return(0,pt.setSecret)(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};G.OidcClient=Te});var De=w(O=>{"use strict";var Ae=O&&O.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.summary=O.markdownSummary=O.SUMMARY_DOCS_URL=O.SUMMARY_ENV_VAR=void 0;var Ur=require("os"),Ce=require("fs"),{access:$r,appendFile:Nr,writeFile:Ir}=Ce.promises;O.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";O.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var xe=class{constructor(){this._buffer=""}filePath(){return Ae(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let e=process.env[O.SUMMARY_ENV_VAR];if(!e)throw new Error(`Unable to find environment variable for $${O.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield $r(e,Ce.constants.R_OK|Ce.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}return this._filePath=e,this._filePath})}wrap(e,r,n={}){let i=Object.entries(n).map(([o,s])=>` ${o}="${s}"`).join("");return r?`<${e}${i}>${r}</${e}>`:`<${e}${i}>`}write(e){return Ae(this,void 0,void 0,function*(){let r=!!e?.overwrite,n=yield this.filePath();return yield(r?Ir:Nr)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Ae(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(e,r=!1){return this._buffer+=e,r?this.addEOL():this}addEOL(){return this.addRaw(Ur.EOL)}addCodeBlock(e,r){let n=Object.assign({},r&&{lang:r}),i=this.wrap("pre",this.wrap("code",e),n);return this.addRaw(i).addEOL()}addList(e,r=!1){let n=r?"ol":"ul",i=e.map(s=>this.wrap("li",s)).join(""),o=this.wrap(n,i);return this.addRaw(o).addEOL()}addTable(e){let r=e.map(i=>{let o=i.map(s=>{if(typeof s=="string")return this.wrap("td",s);let{header:c,data:f,colspan:a,rowspan:u}=s,l=c?"th":"td",_=Object.assign(Object.assign({},a&&{colspan:a}),u&&{rowspan:u});return this.wrap(l,f,_)}).join("");return this.wrap("tr",o)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(e,r){let n=this.wrap("details",this.wrap("summary",e)+r);return this.addRaw(n).addEOL()}addImage(e,r,n){let{width:i,height:o}=n||{},s=Object.assign(Object.assign({},i&&{width:i}),o&&{height:o}),c=this.wrap("img",null,Object.assign({src:e,alt:r},s));return this.addRaw(c).addEOL()}addHeading(e,r){let n=`h${r}`,i=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",o=this.wrap(i,e);return this.addRaw(o).addEOL()}addSeparator(){let e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){let e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,r){let n=Object.assign({},r&&{cite:r}),i=this.wrap("blockquote",e,n);return this.addRaw(i).addEOL()}addLink(e,r){let n=this.wrap("a",e,{href:r});return this.addRaw(n).addEOL()}},vt=new xe;O.markdownSummary=vt;O.summary=vt});var _t=w(E=>{"use strict";var Lr=E&&E.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Br=E&&E.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fr=E&&E.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lr(e,t,r);return Br(e,t),e};Object.defineProperty(E,"__esModule",{value:!0});E.toPlatformPath=E.toWin32Path=E.toPosixPath=void 0;var Vr=Fr(require("path"));function Wr(t){return t.replace(/[\\]/g,"/")}E.toPosixPath=Wr;function Hr(t){return t.replace(/[/]/g,"\\")}E.toWin32Path=Hr;function Gr(t){return t.replace(/[/\\]/g,Vr.sep)}E.toPlatformPath=Gr});var qe=w(h=>{"use strict";var Kr=h&&h.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Jr=h&&h.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gt=h&&h.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&Kr(e,t,r);return Jr(e,t),e},Me=h&&h.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})},S;Object.defineProperty(h,"__esModule",{value:!0});h.getCmdPath=h.tryGetExecutablePath=h.isRooted=h.isDirectory=h.exists=h.READONLY=h.UV_FS_O_EXLOCK=h.IS_WINDOWS=h.unlink=h.symlink=h.stat=h.rmdir=h.rm=h.rename=h.readlink=h.readdir=h.open=h.mkdir=h.lstat=h.copyFile=h.chmod=void 0;var wt=gt(require("fs")),ce=gt(require("path"));S=wt.promises,h.chmod=S.chmod,h.copyFile=S.copyFile,h.lstat=S.lstat,h.mkdir=S.mkdir,h.open=S.open,h.readdir=S.readdir,h.readlink=S.readlink,h.rename=S.rename,h.rm=S.rm,h.rmdir=S.rmdir,h.stat=S.stat,h.symlink=S.symlink,h.unlink=S.unlink;h.IS_WINDOWS=process.platform==="win32";h.UV_FS_O_EXLOCK=268435456;h.READONLY=wt.constants.O_RDONLY;function zr(t){return Me(this,void 0,void 0,function*(){try{yield h.stat(t)}catch(e){if(e.code==="ENOENT")return!1;throw e}return!0})}h.exists=zr;function Qr(t,e=!1){return Me(this,void 0,void 0,function*(){return(e?yield h.stat(t):yield h.lstat(t)).isDirectory()})}h.isDirectory=Qr;function Yr(t){if(t=Zr(t),!t)throw new Error('isRooted() parameter "p" cannot be empty');return h.IS_WINDOWS?t.startsWith("\\")||/^[A-Z]:/i.test(t):t.startsWith("/")}h.isRooted=Yr;function Xr(t,e){return Me(this,void 0,void 0,function*(){let r;try{r=yield h.stat(t)}catch(i){i.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${i}`)}if(r&&r.isFile()){if(h.IS_WINDOWS){let i=ce.extname(t).toUpperCase();if(e.some(o=>o.toUpperCase()===i))return t}else if(yt(r))return t}let n=t;for(let i of e){t=n+i,r=void 0;try{r=yield h.stat(t)}catch(o){o.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${o}`)}if(r&&r.isFile()){if(h.IS_WINDOWS){try{let o=ce.dirname(t),s=ce.basename(t).toUpperCase();for(let c of yield h.readdir(o))if(s===c.toUpperCase()){t=ce.join(o,c);break}}catch(o){console.log(`Unexpected error attempting to determine the actual case of the file '${t}': ${o}`)}return t}else if(yt(r))return t}}return""})}h.tryGetExecutablePath=Xr;function Zr(t){return t=t||"",h.IS_WINDOWS?(t=t.replace(/\//g,"\\"),t.replace(/\\\\+/g,"\\")):t.replace(/\/\/+/g,"/")}function yt(t){return(t.mode&1)>0||(t.mode&8)>0&&t.gid===process.getgid()||(t.mode&64)>0&&t.uid===process.getuid()}function en(){var t;return(t=process.env.COMSPEC)!==null&&t!==void 0?t:"cmd.exe"}h.getCmdPath=en});var Rt=w(y=>{"use strict";var tn=y&&y.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rn=y&&y.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bt=y&&y.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&tn(e,t,r);return rn(e,t),e},I=y&&y.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.findInPath=y.which=y.mkdirP=y.rmRF=y.mv=y.cp=void 0;var nn=require("assert"),j=bt(require("path")),m=bt(qe());function on(t,e,r={}){return I(this,void 0,void 0,function*(){let{force:n,recursive:i,copySourceDirectory:o}=an(r),s=(yield m.exists(e))?yield m.stat(e):null;if(s&&s.isFile()&&!n)return;let c=s&&s.isDirectory()&&o?j.join(e,j.basename(t)):e;if(!(yield m.exists(t)))throw new Error(`no such file or directory: ${t}`);if((yield m.stat(t)).isDirectory())if(i)yield Pt(t,c,0,n);else throw new Error(`Failed to copy. ${t} is a directory, but tried to copy without recursive flag.`);else{if(j.relative(t,c)==="")throw new Error(`'${c}' and '${t}' are the same file`);yield Tt(t,c,n)}})}y.cp=on;function sn(t,e,r={}){return I(this,void 0,void 0,function*(){if(yield m.exists(e)){let n=!0;if((yield m.isDirectory(e))&&(e=j.join(e,j.basename(t)),n=yield m.exists(e)),n)if(r.force==null||r.force)yield Ot(e);else throw new Error("Destination already exists")}yield je(j.dirname(e)),yield m.rename(t,e)})}y.mv=sn;function Ot(t){return I(this,void 0,void 0,function*(){if(m.IS_WINDOWS&&/[*"<>|]/.test(t))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield m.rm(t,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(e){throw new Error(`File was unable to be removed ${e}`)}})}y.rmRF=Ot;function je(t){return I(this,void 0,void 0,function*(){nn.ok(t,"a path argument must be provided"),yield m.mkdir(t,{recursive:!0})})}y.mkdirP=je;function Et(t,e){return I(this,void 0,void 0,function*(){if(!t)throw new Error("parameter 'tool' is required");if(e){let n=yield Et(t,!1);if(!n)throw m.IS_WINDOWS?new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return n}let r=yield St(t);return r&&r.length>0?r[0]:""})}y.which=Et;function St(t){return I(this,void 0,void 0,function*(){if(!t)throw new Error("parameter 'tool' is required");let e=[];if(m.IS_WINDOWS&&process.env.PATHEXT)for(let i of process.env.PATHEXT.split(j.delimiter))i&&e.push(i);if(m.isRooted(t)){let i=yield m.tryGetExecutablePath(t,e);return i?[i]:[]}if(t.includes(j.sep))return[];let r=[];if(process.env.PATH)for(let i of process.env.PATH.split(j.delimiter))i&&r.push(i);let n=[];for(let i of r){let o=yield m.tryGetExecutablePath(j.join(i,t),e);o&&n.push(o)}return n})}y.findInPath=St;function an(t){let e=t.force==null?!0:t.force,r=!!t.recursive,n=t.copySourceDirectory==null?!0:!!t.copySourceDirectory;return{force:e,recursive:r,copySourceDirectory:n}}function Pt(t,e,r,n){return I(this,void 0,void 0,function*(){if(r>=255)return;r++,yield je(e);let i=yield m.readdir(t);for(let o of i){let s=`${t}/${o}`,c=`${e}/${o}`;(yield m.lstat(s)).isDirectory()?yield Pt(s,c,r,n):yield Tt(s,c,n)}yield m.chmod(e,(yield m.stat(t)).mode)})}function Tt(t,e,r){return I(this,void 0,void 0,function*(){if((yield m.lstat(t)).isSymbolicLink()){try{yield m.lstat(e),yield m.unlink(e)}catch(i){i.code==="EPERM"&&(yield m.chmod(e,"0666"),yield m.unlink(e))}let n=yield m.readlink(t);yield m.symlink(n,e,m.IS_WINDOWS?"junction":null)}else(!(yield m.exists(e))||r)&&(yield m.copyFile(t,e))})}});var Dt=w(P=>{"use strict";var un=P&&P.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cn=P&&P.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),K=P&&P.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&un(e,t,r);return cn(e,t),e},At=P&&P.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(P,"__esModule",{value:!0});P.argStringToArray=P.ToolRunner=void 0;var le=K(require("os")),xt=K(require("events")),ln=K(require("child_process")),dn=K(require("path")),fn=K(Rt()),Ct=K(qe()),hn=require("timers"),de=process.platform==="win32",ke=class extends xt.EventEmitter{constructor(e,r,n){if(super(),!e)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=e,this.args=r||[],this.options=n||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,r){let n=this._getSpawnFileName(),i=this._getSpawnArgs(e),o=r?"":"[command]";if(de)if(this._isCmdFile()){o+=n;for(let s of i)o+=` ${s}`}else if(e.windowsVerbatimArguments){o+=`"${n}"`;for(let s of i)o+=` ${s}`}else{o+=this._windowsQuoteCmdArg(n);for(let s of i)o+=` ${this._windowsQuoteCmdArg(s)}`}else{o+=n;for(let s of i)o+=` ${s}`}return o}_processLineBuffer(e,r,n){try{let i=r+e.toString(),o=i.indexOf(le.EOL);for(;o>-1;){let s=i.substring(0,o);n(s),i=i.substring(o+le.EOL.length),o=i.indexOf(le.EOL)}return i}catch(i){return this._debug(`error processing line. Failed with error ${i}`),""}}_getSpawnFileName(){return de&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(e){if(de&&this._isCmdFile()){let r=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let n of this.args)r+=" ",r+=e.windowsVerbatimArguments?n:this._windowsQuoteCmdArg(n);return r+='"',[r]}return this.args}_endsWith(e,r){return e.endsWith(r)}_isCmdFile(){let e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return'""';let r=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'],n=!1;for(let s of e)if(r.some(c=>c===s)){n=!0;break}if(!n)return e;let i='"',o=!0;for(let s=e.length;s>0;s--)i+=e[s-1],o&&e[s-1]==="\\"?i+="\\":e[s-1]==='"'?(o=!0,i+='"'):o=!1;return i+='"',i.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e)return'""';if(!e.includes(" ")&&!e.includes("	")&&!e.includes('"'))return e;if(!e.includes('"')&&!e.includes("\\"))return`"${e}"`;let r='"',n=!0;for(let i=e.length;i>0;i--)r+=e[i-1],n&&e[i-1]==="\\"?r+="\\":e[i-1]==='"'?(n=!0,r+="\\"):n=!1;return r+='"',r.split("").reverse().join("")}_cloneExecOptions(e){e=e||{};let r={cwd:e.cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return r.outStream=e.outStream||process.stdout,r.errStream=e.errStream||process.stderr,r}_getSpawnOptions(e,r){e=e||{};let n={};return n.cwd=e.cwd,n.env=e.env,n.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(n.argv0=`"${r}"`),n}exec(){return At(this,void 0,void 0,function*(){return!Ct.isRooted(this.toolPath)&&(this.toolPath.includes("/")||de&&this.toolPath.includes("\\"))&&(this.toolPath=dn.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield fn.which(this.toolPath,!0),new Promise((e,r)=>At(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(let a of this.args)this._debug(`   ${a}`);let n=this._cloneExecOptions(this.options);!n.silent&&n.outStream&&n.outStream.write(this._getCommandString(n)+le.EOL);let i=new Ue(n,this.toolPath);if(i.on("debug",a=>{this._debug(a)}),this.options.cwd&&!(yield Ct.exists(this.options.cwd)))return r(new Error(`The cwd: ${this.options.cwd} does not exist!`));let o=this._getSpawnFileName(),s=ln.spawn(o,this._getSpawnArgs(n),this._getSpawnOptions(this.options,o)),c="";s.stdout&&s.stdout.on("data",a=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(a),!n.silent&&n.outStream&&n.outStream.write(a),c=this._processLineBuffer(a,c,u=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(u)})});let f="";if(s.stderr&&s.stderr.on("data",a=>{i.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(a),!n.silent&&n.errStream&&n.outStream&&(n.failOnStdErr?n.errStream:n.outStream).write(a),f=this._processLineBuffer(a,f,u=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(u)})}),s.on("error",a=>{i.processError=a.message,i.processExited=!0,i.processClosed=!0,i.CheckComplete()}),s.on("exit",a=>{i.processExitCode=a,i.processExited=!0,this._debug(`Exit code ${a} received from tool '${this.toolPath}'`),i.CheckComplete()}),s.on("close",a=>{i.processExitCode=a,i.processExited=!0,i.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),i.CheckComplete()}),i.on("done",(a,u)=>{c.length>0&&this.emit("stdline",c),f.length>0&&this.emit("errline",f),s.removeAllListeners(),a?r(a):e(u)}),this.options.input){if(!s.stdin)throw new Error("child process missing stdin");s.stdin.end(this.options.input)}}))})}};P.ToolRunner=ke;function pn(t){let e=[],r=!1,n=!1,i="";function o(s){n&&s!=='"'&&(i+="\\"),i+=s,n=!1}for(let s=0;s<t.length;s++){let c=t.charAt(s);if(c==='"'){n?o(c):r=!r;continue}if(c==="\\"&&n){o(c);continue}if(c==="\\"&&r){n=!0;continue}if(c===" "&&!r){i.length>0&&(e.push(i),i="");continue}o(c)}return i.length>0&&e.push(i.trim()),e}P.argStringToArray=pn;var Ue=class t extends xt.EventEmitter{constructor(e,r){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!r)throw new Error("toolPath must not be empty");this.options=e,this.toolPath=r,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=hn.setTimeout(t.HandleTimeout,this.delay,this)))}_debug(e){this.emit("debug",e)}_setResult(){let e;this.processExited&&(this.processError?e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){let r=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(r)}e._setResult()}}}});var Ut=w(T=>{"use strict";var mn=T&&T.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vn=T&&T.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_n=T&&T.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&mn(e,t,r);return vn(e,t),e},jt=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.getExecOutput=T.exec=void 0;var Mt=require("string_decoder"),qt=_n(Dt());function kt(t,e,r){return jt(this,void 0,void 0,function*(){let n=qt.argStringToArray(t);if(n.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");let i=n[0];return e=n.slice(1).concat(e||[]),new qt.ToolRunner(i,e,r).exec()})}T.exec=kt;function yn(t,e,r){var n,i;return jt(this,void 0,void 0,function*(){let o="",s="",c=new Mt.StringDecoder("utf8"),f=new Mt.StringDecoder("utf8"),a=(n=r?.listeners)===null||n===void 0?void 0:n.stdout,u=(i=r?.listeners)===null||i===void 0?void 0:i.stderr,l=z=>{s+=f.write(z),u&&u(z)},_=z=>{o+=c.write(z),a&&a(z)},U=Object.assign(Object.assign({},r?.listeners),{stdout:_,stderr:l}),L=yield kt(t,e,Object.assign(Object.assign({},r),{listeners:U}));return o+=c.end(),s+=f.end(),{exitCode:L,stdout:o,stderr:s}})}T.getExecOutput=yn});var Nt=w(p=>{"use strict";var gn=p&&p.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wn=p&&p.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bn=p&&p.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&gn(e,t,r);return wn(e,t),e},he=p&&p.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})},On=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(p,"__esModule",{value:!0});p.getDetails=p.isLinux=p.isMacOS=p.isWindows=p.arch=p.platform=void 0;var $t=On(require("os")),fe=bn(Ut()),En=()=>he(void 0,void 0,void 0,function*(){let{stdout:t}=yield fe.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Version"',void 0,{silent:!0}),{stdout:e}=yield fe.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Caption"',void 0,{silent:!0});return{name:e.trim(),version:t.trim()}}),Sn=()=>he(void 0,void 0,void 0,function*(){var t,e,r,n;let{stdout:i}=yield fe.getExecOutput("sw_vers",void 0,{silent:!0}),o=(e=(t=i.match(/ProductVersion:\s*(.+)/))===null||t===void 0?void 0:t[1])!==null&&e!==void 0?e:"";return{name:(n=(r=i.match(/ProductName:\s*(.+)/))===null||r===void 0?void 0:r[1])!==null&&n!==void 0?n:"",version:o}}),Pn=()=>he(void 0,void 0,void 0,function*(){let{stdout:t}=yield fe.getExecOutput("lsb_release",["-i","-r","-s"],{silent:!0}),[e,r]=t.trim().split(`
`);return{name:e,version:r}});p.platform=$t.default.platform();p.arch=$t.default.arch();p.isWindows=p.platform==="win32";p.isMacOS=p.platform==="darwin";p.isLinux=p.platform==="linux";function Tn(){return he(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield p.isWindows?En():p.isMacOS?Sn():Pn()),{platform:p.platform,arch:p.arch,isWindows:p.isWindows,isMacOS:p.isMacOS,isLinux:p.isLinux})})}p.getDetails=Tn});var Re=w(d=>{"use strict";var Rn=d&&d.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),An=d&&d.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ne=d&&d.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Rn(e,t,r);return An(e,t),e},It=d&&d.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(u){try{a(n.next(u))}catch(l){s(l)}}function f(u){try{a(n.throw(u))}catch(l){s(l)}}function a(u){u.done?o(u.value):i(u.value).then(c,f)}a((n=n.apply(t,e||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});d.platform=d.toPlatformPath=d.toWin32Path=d.toPosixPath=d.markdownSummary=d.summary=d.getIDToken=d.getState=d.saveState=d.group=d.endGroup=d.startGroup=d.info=d.notice=d.warning=d.error=d.debug=d.isDebug=d.setFailed=d.setCommandEcho=d.setOutput=d.getBooleanInput=d.getMultilineInput=d.getInput=d.addPath=d.setSecret=d.exportVariable=d.ExitCode=void 0;var C=Xe(),F=tt(),J=re(),Lt=Ne(require("os")),Cn=Ne(require("path")),xn=mt(),$e;(function(t){t[t.Success=0]="Success",t[t.Failure=1]="Failure"})($e||(d.ExitCode=$e={}));function Dn(t,e){let r=(0,J.toCommandValue)(e);if(process.env[t]=r,process.env.GITHUB_ENV||"")return(0,F.issueFileCommand)("ENV",(0,F.prepareKeyValueMessage)(t,e));(0,C.issueCommand)("set-env",{name:t},r)}d.exportVariable=Dn;function Mn(t){(0,C.issueCommand)("add-mask",{},t)}d.setSecret=Mn;function qn(t){process.env.GITHUB_PATH||""?(0,F.issueFileCommand)("PATH",t):(0,C.issueCommand)("add-path",{},t),process.env.PATH=`${t}${Cn.delimiter}${process.env.PATH}`}d.addPath=qn;function Ie(t,e){let r=process.env[`INPUT_${t.replace(/ /g,"_").toUpperCase()}`]||"";if(e&&e.required&&!r)throw new Error(`Input required and not supplied: ${t}`);return e&&e.trimWhitespace===!1?r:r.trim()}d.getInput=Ie;function jn(t,e){let r=Ie(t,e).split(`
`).filter(n=>n!=="");return e&&e.trimWhitespace===!1?r:r.map(n=>n.trim())}d.getMultilineInput=jn;function kn(t,e){let r=["true","True","TRUE"],n=["false","False","FALSE"],i=Ie(t,e);if(r.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${t}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}d.getBooleanInput=kn;function Un(t,e){if(process.env.GITHUB_OUTPUT||"")return(0,F.issueFileCommand)("OUTPUT",(0,F.prepareKeyValueMessage)(t,e));process.stdout.write(Lt.EOL),(0,C.issueCommand)("set-output",{name:t},(0,J.toCommandValue)(e))}d.setOutput=Un;function $n(t){(0,C.issue)("echo",t?"on":"off")}d.setCommandEcho=$n;function Nn(t){process.exitCode=$e.Failure,Bt(t)}d.setFailed=Nn;function In(){return process.env.RUNNER_DEBUG==="1"}d.isDebug=In;function Ln(t){(0,C.issueCommand)("debug",{},t)}d.debug=Ln;function Bt(t,e={}){(0,C.issueCommand)("error",(0,J.toCommandProperties)(e),t instanceof Error?t.toString():t)}d.error=Bt;function Bn(t,e={}){(0,C.issueCommand)("warning",(0,J.toCommandProperties)(e),t instanceof Error?t.toString():t)}d.warning=Bn;function Fn(t,e={}){(0,C.issueCommand)("notice",(0,J.toCommandProperties)(e),t instanceof Error?t.toString():t)}d.notice=Fn;function Vn(t){process.stdout.write(t+Lt.EOL)}d.info=Vn;function Ft(t){(0,C.issue)("group",t)}d.startGroup=Ft;function Vt(){(0,C.issue)("endgroup")}d.endGroup=Vt;function Wn(t,e){return It(this,void 0,void 0,function*(){Ft(t);let r;try{r=yield e()}finally{Vt()}return r})}d.group=Wn;function Hn(t,e){if(process.env.GITHUB_STATE||"")return(0,F.issueFileCommand)("STATE",(0,F.prepareKeyValueMessage)(t,e));(0,C.issueCommand)("save-state",{name:t},(0,J.toCommandValue)(e))}d.saveState=Hn;function Gn(t){return process.env[`STATE_${t}`]||""}d.getState=Gn;function Kn(t){return It(this,void 0,void 0,function*(){return yield xn.OidcClient.getIDToken(t)})}d.getIDToken=Kn;var Jn=De();Object.defineProperty(d,"summary",{enumerable:!0,get:function(){return Jn.summary}});var zn=De();Object.defineProperty(d,"markdownSummary",{enumerable:!0,get:function(){return zn.markdownSummary}});var Le=_t();Object.defineProperty(d,"toPosixPath",{enumerable:!0,get:function(){return Le.toPosixPath}});Object.defineProperty(d,"toWin32Path",{enumerable:!0,get:function(){return Le.toWin32Path}});Object.defineProperty(d,"toPlatformPath",{enumerable:!0,get:function(){return Le.toPlatformPath}});d.platform=Ne(Nt())});var Wt=require("https");var Xt=Fe(require("https"));var X=(t,e)=>r=>e(r,t),Ve=(t,e)=>(r,n)=>r?e(r):t(n),Q=(t,e)=>t??e,D=(t,e,r,n)=>{t&&(e[r]=n)};var Zt=(t,e)=>{let r=JSON.stringify(Q(t.payload,{})),n={"Content-length":Q(r?.length,0)};D(t.payload,n,"Content-type","application/json"),D(t.token,n,"Authorization",`Bearer: ${t.token}`);let i=["GET","POST"],o={headers:n,method:Q(t.method,i[+t.payload])};D(t.agent,o,"agent",t.agent);let s=Q(t.http,Xt).request(t.url,o,X(e,er));t.baker?.bake(s),s.on("error",X(void 0,e)),t.payload&&s.write(r),s.end()},We=t=>new Promise((e,r)=>Zt(t,Ve(e,r))),er=(t,e)=>{let r={};t.on("data",n=>r.data=r.data?Buffer.concat([r.data,n]):n),t.on("end",()=>r.data?e(void 0,JSON.parse(r.data.toString())):e(new Error("No data"),void 0)),t.on("error",X(void 0,e))};var Z=class{visit(e,r){for(let n of r)if(this.handle(e,n))break}},B=class extends Z{constructor(r,n){super();this.preferredMethod=r;this.preferredKey=n}handle(r,n){let i=n.key===this.preferredKey;return i&&this.preferredMethod.bind(r)(n.value),i}},pe=class extends Z{handle(e,r){return e.accept(r),!1}},ee=class{constructor(){this.fields={};this.common={Domain:void 0,Expires:void 0,Path:void 0}}accept(e){this.fields[e.key]=e.value}acceptDomain(e){this.common.Domain=e}acceptExpires(e){this.common.Expires=new Date(e)}acceptHttpOnly(e){this.common.HttpOnly=!0}acceptPath(e){this.common.Path=e}acceptSecure(e){this.common.Secure=!0}toString(){let e=0,r=new Array(this.fields.length);for(let n in this.fields)r[e++]=`${n}=${this.fields[n]}`;return r.join("; ").trim()}},Y=new ee,He=t=>{let e=new ee,r=new Array;for(let n of t.split(";")){let i=n.split("="),o=i[0].trim(),s=i.slice(1).join("=");r.push({key:o,value:s})}for(let n of tr)n.visit(e,r);return e},tr=[new B(Y.acceptDomain,"Domain"),new B(Y.acceptExpires,"Expires"),new B(Y.acceptHttpOnly,"HttpOnly"),new B(Y.acceptPath,"Path"),new B(Y.acceptSecure,"Secure"),new pe];var te=class t{constructor(){this.cookies={}}static{this.theOne=new t}static get default(){return t.theOne}#e(e,r){"set-cookie"in r.headers&&(this.cookies[e.host]=r.headers["set-cookie"].map(He))}bake(e){let r=this.get(e.host)?.map(rr).join("; ").trim();return r?.length&&e.setHeader("Cookie",r),e.on("response",this.#e.bind(this,e)),e}get(e){if(e in this.cookies){let r=Date.now(),n=this.cookies[e].filter(i=>r<i.common.Expires.getTime());if(n.length)return this.cookies[e]=n;delete this.cookies[e]}}},rr=t=>t.toString();var Ge=(t,e)=>{let r=e;return r.url=`https://hub.docker.com/v2/${t}`,We(r)},Ke=t=>{let e={method:"POST",payload:{password:t.password,username:t.username}};return D(t.agent,e,"agent",t.agent),D(t.baker,e,"baker",t.baker),D(t.http,e,"http",t.http),Ge("users/login",e)},Je=t=>{let e={method:"PATCH",payload:{description:t.description,full_description:t.overview},token:t.token};return D(t.agent,e,"agent",t.agent),D(t.baker,e,"baker",t.baker),D(t.http,e,"http",t.http),Ge(`repositories/${t.repo}`,e)};var x=Fe(Re()),Ht=require("fs"),Qn=async()=>{let t=(0,x.getInput)("description",{required:!0}),e=(0,x.getInput)("overview")||(0,Ht.readFileSync)("README.md").toString(),r=(0,x.getInput)("password",{required:!0});(0,x.setSecret)(r);let n=(0,x.getInput)("repo",{required:!0}),i=(0,x.getInput)("username",{required:!0}),o=new Wt.Agent({keepAlive:!0}),s=te.default,c=await Ke({agent:o,baker:s,password:r,username:i});return"token"in c&&typeof c.token=="string"?await Je({agent:o,baker:s,description:t,overview:e,repo:`${i}/${n}`,token:c.token}):Promise.reject(c)};Qn().catch(t=>(0,x.setFailed)(t)).then(t=>typeof t>"u"||(0,x.setOutput)("response",t));
