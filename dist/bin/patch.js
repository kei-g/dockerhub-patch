"use strict";var d=(e,p,n)=>new Promise((c,s)=>{var i=o=>{try{t(n.next(o))}catch(a){s(a)}},u=o=>{try{t(n.throw(o))}catch(a){s(a)}},t=o=>o.done?c(o.value):Promise.resolve(o.value).then(i,u);t((n=n.apply(e,p)).next())});import*as r from"@actions/core";import*as g from"http";import{CookieBaker as m,loginAsync as k,setDescriptionAsync as w}from"..";const f=()=>d(this,null,function*(){const e=r.getInput("description",{required:!0}),p=r.getInput("overview",{required:!0}),n=r.getInput("password",{required:!0});r.setSecret(n);const c=r.getInput("repo",{required:!0}),s=r.getInput("username",{required:!0}),i=new g.Agent({keepAlive:!0}),u=m.default,t=yield k({agent:i,baker:u,password:n,username:s});return"token"in t&&typeof t.token=="string"?yield w({agent:i,baker:u,description:e,overview:p,repo:`${s}/${c}`,token:t.token}):Promise.reject(t)});f().catch(e=>r.setFailed(e)).then(e=>typeof e=="undefined"||r.setOutput("response",e));
